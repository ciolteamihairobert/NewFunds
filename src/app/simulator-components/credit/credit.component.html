<div class="simulator-container" style="max-width: 96.3vw">
  <app-header
    title="SIMULATOR CREDIT"
    formName="Credit"
    [exportToExcel]="exportToExcel.bind(this)"
    [exportToPDF]="exportToPDF.bind(this)"
    [clearSimulation]="clearSimulation.bind(this)"
  >
  </app-header>
  <div class="simulator-content">
    <div class="input-section">
      <form class="input-section-content" [formGroup]="creditForm">
        <mat-form-field class="small-field">
          <mat-label>Suma Ã®mprumutatÄƒ (ValutÄƒ)</mat-label>
          <input
            matInput
            type="text"
            formControlName="creditSim_loanAmount"
            (keydown)="this.formDataService.allowOnlyNumbers($event)"
          />
        </mat-form-field>
        <mat-form-field class="small-field">
          <mat-label>Momentul contractÄƒrii (dupÄƒ ... luni)</mat-label>
          <input
            matInput
            type="text"
            formControlName="creditSim_contractingMoment"
            (keydown)="this.formDataService.allowOnlyNumbers($event)"
          />
        </mat-form-field>
        <mat-form-field class="small-field">
          <mat-label>Perioada de rambursare (Luni)</mat-label>
          <input
            matInput
            type="text"
            formControlName="creditSim_repaymentPeriod"
            (keydown)="this.formDataService.allowOnlyNumbers($event)"
          />
        </mat-form-field>
        <mat-form-field class="small-field">
          <mat-label>Modul de rambursare</mat-label>
          <mat-select formControlName="creditSim_repaymentMethod">
            <mat-option
              *ngFor="let method of repaymentMethods"
              [value]="method.value"
            >
              {{ method.viewValue }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="small-field">
          <mat-label>Rambursare anticipatÄƒ lunarÄƒ (ValutÄƒ)</mat-label>
          <input
            matInput
            type="text"
            formControlName="creditSim_monthlyEarlyRepayment"
            (keydown)="this.formDataService.allowOnlyNumbers($event)"
          />
        </mat-form-field>
        <mat-form-field class="small-field">
          <mat-label>Rata dobÃ¢nzii actuale (%)</mat-label>
          <input
            matInput
            type="text"
            formControlName="creditSim_currentInterestRate"
            (keydown)="this.formDataService.allowOnlyNumbers($event)"
          />
        </mat-form-field>
        <mat-form-field class="small-field">
          <mat-label>Rata dobÃ¢nzii ulterioare (%)</mat-label>
          <input
            matInput
            type="text"
            formControlName="creditSim_subsequentInterestRate"
            (keydown)="this.formDataService.allowOnlyNumbers($event)"
          />
        </mat-form-field>
        <mat-form-field class="small-field">
          <mat-label>Revizuirea ratei dobÃ¢nzii (Luni)</mat-label>
          <mat-select formControlName="creditSim_interestRateReviewPeriod">
            <mat-option *ngFor="let period of months" [value]="period">
              {{ period }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="small-field">
          <mat-label>Comision lunar (%)</mat-label>
          <input
            matInput
            type="text"
            formControlName="creditSim_monthlyCommission"
            (keydown)="this.formDataService.allowOnlyNumbers($event)"
          />
        </mat-form-field>
        <mat-form-field class="small-field">
          <mat-label>Perioada de graÈ›ie (Luni)</mat-label>
          <mat-select formControlName="creditSim_gracePeriod">
            <mat-option *ngFor="let period of months" [value]="period">
              {{ period }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </form>
    </div>
    <div
      class="output-section"
      [ngClass]="{ empty: dataSource.data.length === 0 }"
    >
      <div class="results-container" *ngIf="dataSource.data.length > 0">
        <div class="results">
          <div class="result-item">
            <span>ğŸ“… Creditul se poate Ã®nchide Ã®n:</span>
            <div>{{ creditSim_totalPeriod }} luni</div>
          </div>
          <div class="result-item">
            <span>ğŸ’° Totalul de rambursat este:</span>
            <div>{{ creditSim_totalToPay }} RON</div>
          </div>
        </div>
      </div>
      <table
        mat-table
        [dataSource]="dataSource"
        *ngIf="dataSource.data.length > 0"
      >
        <ng-container matColumnDef="creditSim_luna">
          <th mat-header-cell *matHeaderCellDef>Luna</th>
          <td mat-cell *matCellDef="let element">
            {{ element.creditSim_luna }}
          </td>
        </ng-container>
        <ng-container matColumnDef="creditSim_soldInitial">
          <th mat-header-cell *matHeaderCellDef>Sold IniÈ›ial</th>
          <td mat-cell *matCellDef="let element">
            {{ element.creditSim_soldInitial }}
          </td>
        </ng-container>
        <ng-container matColumnDef="creditSim_anuitate">
          <th mat-header-cell *matHeaderCellDef>Anuitate</th>
          <td mat-cell *matCellDef="let element">
            {{ element.creditSim_anuitate }}
          </td>
        </ng-container>
        <ng-container matColumnDef="creditSim_principal">
          <th mat-header-cell *matHeaderCellDef>Principal</th>
          <td mat-cell *matCellDef="let element">
            {{ element.creditSim_principal }}
          </td>
        </ng-container>
        <ng-container matColumnDef="creditSim_dobanda">
          <th mat-header-cell *matHeaderCellDef>DobÃ¢ndÄƒ</th>
          <td mat-cell *matCellDef="let element">
            {{ element.creditSim_dobanda }}
          </td>
        </ng-container>
        <ng-container matColumnDef="creditSim_comisionLunar">
          <th mat-header-cell *matHeaderCellDef>Comision Lunar</th>
          <td mat-cell *matCellDef="let element">
            {{ element.creditSim_comisionLunar }}
          </td>
        </ng-container>
        <ng-container matColumnDef="creditSim_totalPlata">
          <th mat-header-cell *matHeaderCellDef>Total PlatÄƒ</th>
          <td mat-cell *matCellDef="let element">
            {{ element.creditSim_totalPlata }}
          </td>
        </ng-container>
        <ng-container matColumnDef="creditSim_rambursareAnticipata">
          <th mat-header-cell *matHeaderCellDef>Rambursare AnticipatÄƒ</th>
          <td mat-cell *matCellDef="let element">
            {{ element.creditSim_rambursareAnticipata }}
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
      <mat-paginator
        *ngIf="dataSource.data.length > 0"
        [pageSize]="12"
        [hidePageSize]="true"
        [length]="dataSource.data.length"
        showFirstLastButtons
      >
      </mat-paginator>
      <div *ngIf="dataSource.data.length === 0" class="empty-state">
        <p>ğŸ“Š Nu sunt date disponibile momentan.</p>
        <p>
          ğŸ’¡ VÄƒ rugÄƒm sÄƒ introduceÈ›i datele È™i sÄƒ porniÈ›i simularea pentru a
          vedea rezultatele.
        </p>
      </div>
    </div>
  </div>
</div>
